<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Cypress Test App</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <div class="login-box">
            <!-- Logo and Branding -->
            <div class="logo-container">
                <div class="logo" data-cy="logo">üîê</div>
                <span class="brand-name" data-cy="brand-name">SecureAuth</span>
            </div>

            <h1>Welcome Back</h1>
            <p class="subtitle">Please login to your account</p>

            <!-- Alert Messages -->
            <div id="alert-container" class="alert-container" style="display: none;">
                <div id="alert-message" class="alert"></div>
            </div>

            <!-- Login Form -->
            <form id="login-form" class="login-form">
                <div class="form-group">
                    <label for="email">Email Address</label>
                    <input
                        type="email"
                        id="email"
                        name="email"
                        placeholder="Enter your email"
                        data-cy="email-input"
                        required
                    >
                    <span class="error-message" id="email-error"></span>
                </div>

                <div class="form-group">
                    <label for="password">Password</label>
                    <div class="password-wrapper">
                        <input
                            type="password"
                            id="password"
                            name="password"
                            placeholder="Enter your password"
                            data-cy="password-input"
                            required
                        >
                        <button type="button" class="toggle-password" id="toggle-password" data-cy="toggle-password">
                            <span class="eye-icon">üëÅÔ∏è</span>
                        </button>
                    </div>
                    <span class="error-message" id="password-error"></span>
                </div>

                <!-- MFA Code (Hidden by default) -->
                <div class="form-group" id="mfa-group" style="display: none;">
                    <label for="mfa-code">MFA Code</label>
                    <input
                        type="text"
                        id="mfa-code"
                        name="mfa-code"
                        placeholder="Enter 6-digit code"
                        maxlength="6"
                        data-cy="mfa-input"
                    >
                    <span class="error-message" id="mfa-error"></span>
                </div>

                <!-- CAPTCHA (Hidden by default) -->
                <div class="form-group captcha-group" id="captcha-group" style="display: none;">
                    <label for="captcha">Security Check</label>
                    <div class="captcha-wrapper">
                        <div class="captcha-display" id="captcha-display" data-cy="captcha-display"></div>
                        <button type="button" id="refresh-captcha" class="refresh-captcha" data-cy="refresh-captcha">üîÑ</button>
                    </div>
                    <input
                        type="text"
                        id="captcha-input"
                        name="captcha"
                        placeholder="Enter the code above"
                        data-cy="captcha-input"
                    >
                    <span class="error-message" id="captcha-error"></span>
                </div>

                <div class="form-options">
                    <label class="checkbox-label">
                        <input type="checkbox" id="remember-me" name="remember-me" data-cy="remember-me">
                        <span>Remember me</span>
                    </label>
                    <a href="#" id="forgot-password" class="forgot-link" data-cy="forgot-password">Forgot password?</a>
                </div>

                <button type="submit" class="btn-login" id="login-btn" data-cy="login-button">
                    <span id="btn-text">Login</span>
                    <span id="btn-spinner" class="spinner" style="display: none;"></span>
                </button>

                <div class="login-attempts" id="login-attempts" style="display: none;" data-cy="login-attempts">
                    <small>Failed attempts: <span id="attempts-count">0</span>/5</small>
                </div>
            </form>

            <!-- SSO Options -->
            <div class="divider">
                <span>OR</span>
            </div>

            <div class="sso-options">
                <button class="btn-sso btn-google" id="google-login" data-cy="google-login">
                    <span class="sso-icon">G</span>
                    Continue with Google
                </button>
                <button class="btn-sso btn-github" id="github-login" data-cy="github-login">
                    <span class="sso-icon">‚ö°</span>
                    Continue with GitHub
                </button>
            </div>

            <p class="signup-link">
                Don't have an account? <a href="pages/signup.html" data-cy="signup-link">Sign up</a>
            </p>
        </div>
    </div>

    <!-- Forgot Password Modal -->
    <div id="forgot-password-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close" id="close-modal" data-cy="close-modal">&times;</span>
            <h2>Reset Password</h2>
            <p>Enter your email address and we'll send you a link to reset your password.</p>
            <form id="forgot-password-form">
                <div class="form-group">
                    <input
                        type="email"
                        id="reset-email"
                        placeholder="Enter your email"
                        data-cy="reset-email-input"
                        required
                    >
                </div>
                <button type="submit" class="btn-login" data-cy="send-reset-button">Send Reset Link</button>
            </form>
            <div id="reset-message" class="reset-message" style="display: none;"></div>
        </div>
    </div>

    <script src="js/app.js"></script>
</body>
</html>
